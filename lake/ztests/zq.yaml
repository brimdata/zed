script: |
  mkdir logs
  zed lake import -R logs babble.zson
  zed lake query -R logs "count()" | zq -z -
  echo ===
  zed lake map -R logs -o count.zng "count()"
  zed lake query -R logs "* | sort -r count" count.zng | zq -z -
  echo ===
  zed lake query -R logs "sum(count)" count.zng | zq -z -

inputs:
  - name: babble.zson
    source: ../../ztests/suite/data/babble.zson

outputs:
  - name: stdout
    data: |
      {count:1000 (uint64)} (=0)
      ===
      {count:504 (uint64)} (=0)
      {count:496} (0)
      ===
      {sum:1000 (uint64)} (=0)
