script: |
  source service.sh
  zed create -q -orderby x:asc test
  zed use -q test
  echo {x:1} | zed load -q -
  r=$(echo {x:2} | zed load - | head -1 | awk '{print $1}')
  r=$(zed revert $r | awk '{print $5}')
  zed vacuum -f
  zed revert -q $r
  zed query -z '*'

inputs:
  - name: service.sh

outputs:
  - name: stdout
    regexp: |
      vacuumed 1 object
      \{x:1\}
      error\("file:.*file does not exist"\)
